<html>
<head>
    <meta charset="utf-8">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 9pt; /* Detaylı tablo için biraz daha küçük font */
            color: #333;
        }
        .header-table {
            width: 100%; border-bottom: 2px solid #455a64; margin-bottom: 15px;
        }
        .title { font-size: 16pt; font-weight: bold; color: #455a64; }
        .subtitle { font-size: 11pt; color: #666; margin-top: 5px; }
        
        table.data {
            width: 100%; border-collapse: collapse;
        }
        table.data th {
            background-color: #455a64; color: white; padding: 6px;
            text-align: left; border: 1px solid #455a64; font-size: 9pt;
        }
        table.data td {
            border: 1px solid #cfd8dc; padding: 5px; vertical-align: middle;
        }
        table.data tr:nth-child(even) { background-color: #eceff1; }
        
        .badge {
            padding: 2px 6px; border-radius: 4px; font-size: 8pt; font-weight: bold; color: white;
        }
        .bg-ok { background-color: #4caf50; }
        .bg-fail { background-color: #e53935; }
        .bg-warn { background-color: #fb8c00; }
        .bg-gray { background-color: #78909c; }
    </style>
</head>
<body>
    <table class="header-table">
        <tr>
            <td style="border:none; padding-bottom:10px;">
                <div class="title">DETAYLI RKE ENVANTERİ</div>
                <div class="subtitle">{{ filtre }}</div>
            </td>
            <td style="border:none; text-align:right; vertical-align:bottom; color:#777;">
                Tarih: {{ rapor_tarihi }}
            </td>
        </tr>
    </table>

    <table class="data">
        <thead>
            <tr>
                <th style="width: 12%;">Ekipman No</th>
                <th style="width: 15%;">Cinsi</th>
                <th style="width: 8%; text-align:center;">Pb</th>
                <th style="width: 10%; text-align:center;">Yıl</th>
                <th style="width: 12%;">Son Kontrol</th>
                <th style="width: 18%;">Durum</th>
                <th style="width: 25%;">Açıklama</th>
            </tr>
        </thead>
        <tbody>
            {% for v in tablo %}
            <tr>
                <td style="font-weight:bold;">{{ v.EkipmanNo }}</td>
                <td>{{ v.Cins }}</td>
                <td style="text-align:center;">{{ v.Pb }}</td>
                <td style="text-align:center;">{{ v.HizmetYili }}</td>
                <td>{{ v.Tarih }}</td>
                <td>
                    {% if 'Uygun Değil' in v.Sonuc or 'Hurda' in v.Sonuc %}
                        <span class="badge bg-fail">{{ v.Sonuc }}</span>
                    {% elif 'Uygun' in v.Sonuc %}
                        <span class="badge bg-ok">{{ v.Sonuc }}</span>
                    {% else %}
                        <span class="badge bg-gray">{{ v.Sonuc }}</span>
                    {% endif %}
                </td>
                <td>{{ v.Aciklama }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <p style="font-size:9pt; margin-top:10px; color:#555;">
        <strong>Toplam:</strong> {{ tablo|length }} ekipman listelenmiştir.
    </p>
</body>
</html>